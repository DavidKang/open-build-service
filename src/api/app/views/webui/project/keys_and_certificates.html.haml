- @pagetitle = "Key and certificate for #{@project}"

.card.mb-3
  = render partial: 'tabs', locals: { project: @project }
  .card-body
    %h3.card-title= @pagetitle
    .card.mb-3
      .card-body.key-content
        .d-flex.align-items-stretch.justify-content-between
          .icon.text-center.pr-4
            %i.fas.fa-key.fa-2x.text-success
            .px-4.py-1.mt-2.border.rounded
              GPG

            %small.text-muted
              #{@project.key_info.algorithm.upcase} - #{@project.key_info.keysize} bytes
          .info
            %strong.d-block.mb-2= @project.key_info.origin.presence || 'There is no origin for this key'
            %div
              %strong Key ID:
              %span @project.key_info.keyid
            %div
              %strong Fingerprint:
              %span= @project.key_info.fingerprint

            %span.text-muted
              - if @project.key_info.expires
                Expires on
                = DateTime.strptime(@project.key_info.expires, '%s').strftime('%F')
              - else
                This key does not expire

          .download.pl-4
            = link_to(project_public_key_path(project_name: @project.name), title: 'Download GPG Key', class: 'btn btn-success w-100') do
              %i.fas.fa-download

    - if true || @project.key_info.ssl_certificate.present?
      .card
        .card-body
          %h5.card-title
            SSL Certificate
            = link_to(project_ssl_certificate_path(project_name: @project.name), title: 'Download SSL Certificate', class: 'btn btn-success float-right') do
              %i.fas.fa-download
